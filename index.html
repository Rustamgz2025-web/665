<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargo 665 | Bilingual Logistics Calculator | 货运计算器</title>
    <style>
        :root {
            --primary: #1a1a1a;
            --accent: #f39c12;
            --accent-hover: #e67e22;
            --bg-body: #f1f2f6;
            --bg-card: #ffffff;
            --text-main: #2c3e50;
            --text-light: #7f8c8d;
            --border-color: #dcdde1;
            --success: #27ae60;
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
            --radius: 16px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", sans-serif;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.5;
            padding-bottom: 50px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: var(--primary);
            width: 100%;
            margin-bottom: 40px;
            border-bottom: 4px solid var(--accent);
            position: relative;
            overflow: hidden;
        }

        .banner-wrapper {
            width: 100%;
            max-height: 400px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
        }

        .banner-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
            object-position: center;
        }

        @media (max-width: 1400px) { .banner-wrapper { max-height: 350px; } }
        @media (max-width: 992px) { .banner-wrapper { max-height: 300px; } }
        @media (max-width: 768px) { .banner-wrapper { max-height: 200px; } }
        @media (max-width: 480px) { .banner-wrapper { max-height: 150px; } }

        .cn {
            display: block;
            font-size: 0.85em;
            font-weight: 400;
            color: var(--accent);
            margin-top: 2px;
        }

        .app-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
        }

        @media (max-width: 992px) { .app-grid { grid-template-columns: 1fr; } }

        .card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 35px;
            box-shadow: var(--shadow);
        }

        h2 {
            margin-bottom: 30px;
            font-size: 1.5rem;
            border-left: 5px solid var(--accent);
            padding-left: 15px;
        }

        .form-group { margin-bottom: 25px; }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .input-box {
            position: relative;
            display: flex;
            align-items: center;
        }

        input, select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #edf2f7;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        input:focus, select:focus {
            border-color: var(--accent);
            background: white;
            box-shadow: 0 0 0 4px rgba(243, 156, 18, 0.1);
        }

        .unit {
            position: absolute;
            right: 18px;
            font-weight: 600;
            color: var(--text-light);
            pointer-events: none;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .result-panel {
            background: var(--primary);
            color: white;
            position: sticky;
            top: 30px;
            display: flex;
            flex-direction: column;
        }

        .total-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .total-amount {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 25px;
            color: #fff;
        }

        .breakdown {
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 25px;
        }

        .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .row .val {
            font-weight: 700;
            color: var(--accent);
        }

        .row .lbl {
            color: #bdc3c7;
        }

        .btn-print {
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s, background 0.3s;
            text-transform: uppercase;
        }

        .btn-print:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .checkbox-card {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .check-item {
            border: 2px solid #edf2f7;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.2s;
        }

        .check-item:hover { border-color: var(--accent); }
        .check-item input { width: auto; }

        .ins-hidden { display: none; }
        
        .ins-info-box {
            margin-top: 15px;
            border: 1px solid #dcdde1;
            border-radius: 8px;
            overflow: hidden;
            font-size: 0.85rem;
        }
        
        .ins-info-box summary {
            background: #f8fafc;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            list-style: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ins-info-box summary::after {
            content: "+";
            font-size: 1.2rem;
            color: var(--accent);
        }
        
        .ins-info-box[open] summary::after {
            content: "-";
        }
        
        .ins-content {
            padding: 15px;
            background: white;
            color: var(--text-main);
            line-height: 1.6;
        }

        .ins-content ul { padding-left: 20px; margin-bottom: 10px; }
        .ins-content li { margin-bottom: 5px; }
        .important-red { color: #e74c3c; font-weight: bold; }

        .table-section { margin-top: 50px; }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }
        th {
            background: #f8fafc;
            padding: 15px;
            text-align: left;
            font-size: 0.85rem;
            color: var(--text-light);
            text-transform: uppercase;
        }
        td {
            padding: 15px;
            border-top: 1px solid #f1f2f6;
        }
        tr.active-row {
            background: rgba(243, 156, 18, 0.1);
            font-weight: 700;
        }

        #print-offer { display: none; }
        @media print {
            body * { visibility: hidden; }
            #print-offer, #print-offer * { visibility: visible; }
            #print-offer {
                display: block;
                position: absolute;
                left: 0; top: 0; width: 100%;
                background: white; color: black; padding: 40px;
            }
            .no-print { display: none !important; }
            .print-logo { height: 80px; margin-bottom: 10px; }
        }
        .print-head {
            display: flex;
            justify-content: space-between;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

<header class="no-print">
    <div class="banner-wrapper">
        <img src="66501.jpg" alt="Cargo 665 Banner" class="banner-image">
    </div>
</header>

<main class="container">
    <div class="app-grid no-print">
        <div class="card">
            <h2>
                Калькулятор стоимости
                <span class="cn">费用计算器</span>
            </h2>

            <div class="form-group">
                <label>Категория товаров / 货物类别</label>
                <select id="category" onchange="calc()">
                    <option value="cloth">Одежда / 服装 (30-35 d)</option>
                    <option value="taobao">Taobao / 淘宝 (25-40 d)</option>
                </select>
                <p style="font-size: 0.8rem; color: #7f8c8d; margin-top: 8px;">
                    * По вопросам других категорий обращайтесь к менеджеру / 其他类别请咨询客服经理
                </p>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label>Вес / 重量</label>
                    <div class="input-box">
                        <input type="number" id="weight" value="10" min="10" step="0.1" oninput="calc()">
                        <span class="unit">kg</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Объем / 体积</label>
                    <div class="input-box">
                        <input type="number" id="volume" value="0.1" step="0.01" oninput="calc()">
                        <span class="unit">m³</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Дополнительно / 额外费用</label>
                <div class="checkbox-card">
                    <label class="check-item">
                        <input type="checkbox" id="spec_cargo" onchange="calc()">
                        <span>Спецгруз <span class="cn">特殊货物 (+$0.2)</span></span>
                    </label>
                    <label class="check-item">
                        <input type="checkbox" id="replica" onchange="calc()">
                        <span>Реплики брендов <span class="cn">仿牌 (+$0.3)</span></span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>Упаковка / 包装类型 (Обязательно)</label>
                <select id="pack" onchange="calc()">
                    <option value="4" selected>Мешок + Скотч / 袋子 + 胶带 ($4)</option>
                    <option value="5">Уголки / 护角包裝 ($5)</option>
                    <option value="8">Обрешетка / 木架 ($8)</option>
                    <option value="30">Поддон / 托盘 ($30/m³)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Страхование груза / 货物保险</label>
                <div style="margin-bottom: 15px;">
                    <label class="check-item" style="width: 100%;">
                        <input type="checkbox" id="ins_check" onchange="toggleInsurance()">
                        <span>Застраховать груз <span class="cn">购买保险</span></span>
                    </label>
                </div>

                <div id="ins_input_block" class="ins-hidden">
                    <label style="font-size: 0.9em; margin-bottom: 5px;">Общая стоимость товара ($) / 货物总值</label>
                    <div class="input-box">
                        <input type="number" id="val_goods" placeholder="Например: 700" oninput="calc()">
                        <span class="unit">$</span>
                    </div>
                    <div style="margin-top: 5px; font-size: 0.85rem; color: var(--accent);">
                        Расчетный тариф: <span id="ins_percent_display">0%</span>
                    </div>
                </div>

                <details class="ins-info-box">
                    <summary>Условия страхования и ответственность / 保险条款与责任</summary>
                    <div class="ins-content">
                        <p><b>СБОР СТРАХОВАНИЯ ТОВАРА: от 1-7% / 货物保险费：1-7%</b></p>
                        <br>
                        <p>1. Страхование является добровольным. / 保险是自愿的。</p>
                        <p>2. Возмещение только за <b>потерянный/украденный/конфискованный</b> груз. / 仅对<b>丢失、被盗、没收</b>的货物进行赔偿。</p>
                        <p>3. Ответственность: до г. Москва МКАД 19. / 责任范围：运抵莫斯科 MKAD 19。</p>
                        <br>
                        <p class="important-red">ВАЖНО / 重要提示:</p>
                        <p>Мы не несем ответственность за повреждение или утрату товарного вида. / 我们对运输途中的破损或品相损失不承担责任。</p>
                        <br>
                        <p><b>Страховой сбор / 保险费率:</b></p>
                        <ul>
                            <li>1% - до/至 15$/кг</li>
                            <li>2% - 16-30$/кг</li>
                            <li>3% - 31-45$/кг</li>
                            <li>4% - 46-60$/кг</li>
                            <li>5% - 61-75$/кг</li>
                            <li>6% - 76-90$/кг</li>
                            <li>7% - 91-105$/кг</li>
                        </ul>
                        <p><b>Без страховки / 无保险:</b></p>
                        <p>Компенсация: <b>3$ за кг</b> / 赔偿标准：<b>3美元/公斤</b>。</p>
                    </div>
                </details>
            </div>
        </div>

        <div class="card result-panel">
            <div class="total-label">Итого к оплате / 总费用</div>
            <div class="total-amount" id="res_total">$0.00</div>

            <div class="breakdown">
                <div class="row">
                    <span class="lbl">Плотность / 密度</span>
                    <span class="val" id="res_dens">0 kg/m³</span>
                </div>
                <div class="row">
                    <span class="lbl">Тариф / 单价</span>
                    <span class="val" id="res_rate">$0.00</span>
                </div>
                <div class="row">
                    <span class="lbl">Доставка / 运费</span>
                    <span class="val" id="res_ship">$0.00</span>
                </div>
                <div class="row">
                    <span class="lbl">Упаковка / 包装</span>
                    <span class="val" id="res_pack">$0.00</span>
                </div>
                <div class="row">
                    <span class="lbl">Страховка / 保险</span>
                    <span class="val" id="res_ins">$0.00</span>
                </div>
            </div>

            <button class="btn-print" onclick="window.print()">
                Печать КП / 打印报价单
            </button>
        </div>
    </div>

    <div class="table-section no-print">
        <h2 style="margin-top: 40px;">Тарифная сетка / 价格表</h2>
        <div style="overflow-x: auto;">
            <table id="tariff_table">
                <thead>
                    <tr>
                        <th>Плотность / 密度 (kg/m³)</th>
                        <th>Цена / 价格 ($/kg)</th>
                        <th>Примечание / 备注</th>
                    </tr>
                </thead>
                <tbody id="table_body"></tbody>
            </table>
        </div>
    </div>
</main>

<div id="print-offer">
    <div class="print-head">
        <div>
            <img src="66501.jpg" alt="Logo" class="print-logo">
            <p>Commercial Offer / 商业报价单</p>
        </div>
        <div style="text-align: right;">
            <p>Date: <span id="p_date"></span></p>
            <p>Contacts: +7 (916) 028-12-61</p>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 30px;">
        <div>
            <h3>Cargo Details / 货物详情</h3>
            <hr style="margin: 10px 0;">
            <p>Category / 类别: <b id="p_cat"></b></p>
            <p>Weight / 重量: <b id="p_weight"></b> kg</p>
            <p>Volume / 体积: <b id="p_vol"></b> m³</p>
            <p>Density / 密度: <b id="p_dens"></b> kg/m³</p>
        </div>
        <div>
            <h3>Final Quote / 最终报价</h3>
            <hr style="margin: 10px 0;">
            <p>Shipping / 运费: <b id="p_ship"></b></p>
            <p>Packaging / 包装: <b id="p_pack"></b></p>
            <p>Insurance / 保险: <b id="p_ins"></b></p>
            <h2 style="color: #f39c12; margin-top: 15px;">TOTAL: <span id="p_total"></span></h2>
        </div>
    </div>
</div>

<script>
    const DATA = {
        cloth: [
            {m:200, x:9999, p:3.40},
            {m:190, x:200, p:3.50},
            {m:180, x:190, p:3.60},
            {m:170, x:180, p:3.70},
            {m:160, x:170, p:3.80},
            {m:150, x:160, p:3.90},
            {m:140, x:150, p:4.00},
            {m:130, x:140, p:4.10},
            {m:120, x:130, p:4.20},
            {m:110, x:120, p:4.30},
            {m:100, x:110, p:4.40},
            {m:0, x:100, p:4.40}
        ],
        taobao: [
            {m:0, x:9999, p:7.0}
        ]
    };

    function toggleInsurance() {
        const isChecked = document.getElementById('ins_check').checked;
        document.getElementById('ins_input_block').style.display = isChecked ? 'block' : 'none';
        calc();
    }

    function getInsuranceRate(val, weight) {
        if (weight <= 0 || val <= 0) return 0;
        const valPerKg = val / weight;
        if (valPerKg <= 15) return 0.01;
        if (valPerKg <= 30) return 0.02;
        if (valPerKg <= 45) return 0.03;
        if (valPerKg <= 60) return 0.04;
        if (valPerKg <= 75) return 0.05;
        if (valPerKg <= 90) return 0.06;
        return 0.07;
    }

    function calc() {
        const cat = document.getElementById('category').value;
        const w = parseFloat(document.getElementById('weight').value) || 0;
        const v = parseFloat(document.getElementById('volume').value) || 0;
        const isSpec = document.getElementById('spec_cargo').checked;
        const isRep = document.getElementById('replica').checked;
        const packVal = parseFloat(document.getElementById('pack').value);
        const isInsured = document.getElementById('ins_check').checked;
        const goodsVal = parseFloat(document.getElementById('val_goods').value) || 0;
        
        const density = v > 0 ? w / v : 0;
        const tiers = DATA[cat];
        let tier = tiers.find(t => density >= t.m && density < t.x) || tiers[tiers.length - 1];

        let rate = tier.p;
        if (isSpec) rate += 0.2;
        if (isRep) rate += 0.3;

        const shipCost = w * rate;
        const packCost = packVal === 30 ? (v * 30) : packVal;

        let insPct = 0;
        let insCost = 0;
        if (isInsured && goodsVal > 0) {
            insPct = getInsuranceRate(goodsVal, w);
            insCost = goodsVal * insPct;
        }

        const total = shipCost + packCost + insCost;

        document.getElementById('res_total').innerText = '$' + total.toFixed(2);
        document.getElementById('res_dens').innerText = density.toFixed(1) + ' kg/m³';
        document.getElementById('res_rate').innerText = '$' + rate.toFixed(2) + '/kg';
        document.getElementById('res_ship').innerText = '$' + shipCost.toFixed(2);
        document.getElementById('res_pack').innerText = '$' + packCost.toFixed(2);
        document.getElementById('res_ins').innerText = '$' + insCost.toFixed(2);
        document.getElementById('ins_percent_display').innerText = (insPct * 100).toFixed(0) + '%';

        renderTable(cat, density);
        updatePrint(cat, w, v, density, shipCost, packCost, insCost, total);
    }

    function renderTable(cat, currentDens) {
        const body = document.getElementById('table_body');
        body.innerHTML = '';
        DATA[cat].forEach(t => {
            const tr = document.createElement('tr');
            if (currentDens >= t.m && currentDens < t.x) tr.className = 'active-row';
            const range = t.x > 5000 ? `>${t.m}` : `${t.m}-${t.x}`;
            tr.innerHTML = `<td>${range}</td><td>$${t.p.toFixed(2)}</td><td>По весу / 按重量</td>`;
            body.appendChild(tr);
        });
    }

    function updatePrint(cat, w, v, d, ship, pack, ins, total) {
        const names = {cloth:'Одежда / 服装', taobao:'Taobao'};
        document.getElementById('p_date').innerText = new Date().toLocaleDateString();
        document.getElementById('p_cat').innerText = names[cat];
        document.getElementById('p_weight').innerText = w;
        document.getElementById('p_vol').innerText = v;
        document.getElementById('p_dens').innerText = d.toFixed(1);
        document.getElementById('p_ship').innerText = '$' + ship.toFixed(2);
        document.getElementById('p_pack').innerText = '$' + pack.toFixed(2);
        document.getElementById('p_ins').innerText = '$' + ins.toFixed(2);
        document.getElementById('p_total').innerText = '$' + total.toFixed(2);
    }

    window.onload = calc;
</script>

</body>
</html>
